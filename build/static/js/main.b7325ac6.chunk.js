(this["webpackJsonpimage-tagger2"]=this["webpackJsonpimage-tagger2"]||[]).push([[0],{22:function(e,n,t){},24:function(e,n,t){},33:function(e,n,t){},37:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var i=t(2),r=t.n(i),o=t(17),c=t.n(o),a=(t(22),t(23),t(24),t(16)),l=t(15),s=t(3),u=t(13),d=t.n(u),j=t(4),f=t(45),v=t(46),g=t(47),b=(t(33),t(0)),m=function(e){var n=e.coordinates,t=e.addTag,r=e.onRemove,o=Object(i.useRef)(null);return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{children:Object(b.jsx)(f.a,{className:"tag-factory",innerRef:o,style:{top:n.Y+"px",left:n.X+"px"},children:Object(b.jsxs)(v.a,{children:[Object(b.jsx)(g.a,{className:"remove-tag btn-icon btn-2",color:"danger",type:"button",onClick:function(){return r()},children:Object(b.jsx)(j.c,{})}),Object(b.jsxs)("div",{className:"input-group-merge input-group tag-legend",children:[Object(b.jsx)("div",{className:"input-group-prepend",children:Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)(j.e,{})})}),Object(b.jsx)("input",{placeholder:"Legend",type:"text",className:"form-control",onKeyPress:function(e){return function(e){var n,i,r,c;"Enter"===e.key&&t({id:d.a.generate(),X:null===o||void 0===o||null===(n=o.current)||void 0===n?void 0:n.offsetLeft,Y:null===o||void 0===o||null===(i=o.current)||void 0===i?void 0:i.offsetTop,widthPx:(null===o||void 0===o||null===(r=o.current)||void 0===r?void 0:r.clientWidth)+4,heightPx:(null===o||void 0===o||null===(c=o.current)||void 0===c?void 0:c.clientHeight)+4,description:e.target.value})}(e)}})]})]})})})})},O=(t(37),function(e){var n=e.tag,t=e.updateTag,r=e.removeTag,o=Object(i.useRef)(null),c=Object(i.useState)((null===n||void 0===n?void 0:n.description)||""),a=Object(s.a)(c,2),l=a[0],u=a[1],d=Object(i.useState)(!1),m=Object(s.a)(d,2),O=m[0],h=m[1];return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{children:Object(b.jsx)(f.a,{innerRef:o,style:{top:(null===n||void 0===n?void 0:n.Y)+"px",left:(null===n||void 0===n?void 0:n.X)+"px",width:null===n||void 0===n?void 0:n.widthPx,height:null===n||void 0===n?void 0:n.heightPx},children:Object(b.jsxs)(v.a,{children:[Object(b.jsx)(g.a,{className:"remove-tag btn-icon btn-2",color:"danger",type:"button",onClick:function(){return r(null===n||void 0===n?void 0:n.id)},children:Object(b.jsx)(j.c,{})}),Object(b.jsxs)("div",{className:"input-group-merge input-group tag-legend",children:[Object(b.jsx)("div",{className:"input-group-prepend",children:Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)(j.e,{})})}),Object(b.jsx)("input",{value:l,readOnly:!O,type:"text",className:"form-control",onClick:function(){return h(!0)},onChange:function(e){return u(e.target.value)},onKeyPress:function(e){return function(e){var i,r;"Enter"===e.key&&(h(!1),t(n.id,{description:l,widthPx:(null===o||void 0===o||null===(i=o.current)||void 0===i?void 0:i.clientWidth)+4,heightPx:(null===o||void 0===o||null===(r=o.current)||void 0===r?void 0:r.clientHeight)+4}))}(e)}})]})]})})})})}),h=["jpg","jpeg","png","gif"],p=function(e){var n=e.substr(e.lastIndexOf(".")+1);return!n||h.includes(null===n||void 0===n?void 0:n.toLowerCase())},x=function(e){return new Promise((function(n,t){function i(e){null===r||void 0===r||r.removeEventListener("onerror",i),t(e)}var r=new FileReader;r.onerror=i,r.onload=function e(){if(null===r||void 0===r||r.removeEventListener("onload",e),null===r||void 0===r||r.removeEventListener("onerror",i),"string"===typeof(null===r||void 0===r?void 0:r.result)){var t=null===r||void 0===r?void 0:r.result;n(t)}},r.readAsDataURL(e)}))},N=(t(38),function(e){var n,t=e.onFileLoaded,r=e.children,o=Object(i.useState)(!0),c=Object(s.a)(o,2),a=c[0],l=c[1];return Object(b.jsxs)(b.Fragment,{children:[!0===a&&Object(b.jsx)("input",{type:"file",name:"file-selector",style:{display:"none"},ref:function(e){return n=e},onChange:function(){console.log("fileInputRef.files[0]  ",n.files[0]),x(n.files[0]).then(t).catch((function(){return alert("Error while loading the image file")})).finally((function(){l(!0),l(!0)}))}}),Object(b.jsxs)(g.a,{className:"btn-icon btn-3",color:"primary",onClick:function(){n.click()},children:[Object(b.jsx)(j.d,{color:"white",size:20}),Object(b.jsxs)("span",{className:"btn-inner--text",children:[" ",r]})]})]})}),y=(t(39),t.p+"static/media/image-not-found.295cf90a.png"),F=function(e){var n=e.coverImageUrlNotFound;return Object(b.jsx)("img",{src:n||y,alt:"not found"})},S=(t(40),function(e){var n=e.imageUrl,t=e.isImageUrlNotFound,i=e.coverImageUrlNotFound,r=e.onImageError,o=e.onClickOverImage;return t?Object(b.jsx)(F,{coverImageUrlNotFound:i}):Object(b.jsx)("img",{src:n,alt:"this pic is the one to be tagged",onError:r,onClick:function(e){return o(e)}})}),C=function(e){var n,t=e.setFocus,r=e.placeholder,o=e.onChangeUrl,c=e.onImageTypeNotSupported;return Object(i.useEffect)((function(){!0===t&&n.focus()})),Object(b.jsx)("input",{className:"form-control",type:"search",size:4,ref:function(e){return n=e},placeholder:r||"Paste URL of the image to be tagged",onChange:function(e){return n=e.target.value,void(p(n)?o(n):c());var n}})},w=function(e){return"string"===typeof(null===e||void 0===e?void 0:e.imageUrl)&&""!==(null===e||void 0===e?void 0:e.imageUrl.trim())&&Array.isArray(null===e||void 0===e?void 0:e.tags)},k={saveToJsonFile:function(e,n){var t=JSON.stringify(e,null,4),i="data:application/json;charset=utf-8,"+encodeURIComponent(t),r=document.createElement("a");r.setAttribute("href",i),r.setAttribute("download",n||"image-tags.json"),r.click()},loadTagsFromJsonFile:function(e){return new Promise((function(n,t){function i(e){null===r||void 0===r||r.removeEventListener("onerror",i),t(e)}var r=new FileReader;r.onerror=i,r.onload=function e(){if(null===r||void 0===r||r.removeEventListener("onload",e),null===r||void 0===r||r.removeEventListener("onerror",i),"string"===typeof(null===r||void 0===r?void 0:r.result)){var o=JSON.parse((null===r||void 0===r?void 0:r.result)||"{}");w(o)&&n(o),t("JSON file has a wrong structured content")}},r.readAsText(e)}))}},I=(t(41),function(e){var n,t=e.onFileLoaded,r=e.children,o=Object(i.useState)(!0),c=Object(s.a)(o,2),a=c[0],l=c[1];return Object(b.jsxs)(b.Fragment,{children:[!0===a&&Object(b.jsx)("input",{type:"file",name:"file-selector",id:"load-json-file-selector",ref:function(e){return n=e},onChange:function(){k.loadTagsFromJsonFile(n.files[0]).then(t).catch((function(){return alert("Error while loading the JSON file")})).finally((function(){l(!0),l(!0)}))}}),Object(b.jsxs)(g.a,{className:"btn-icon btn-3",color:"primary",onClick:function(){n.click()},children:[Object(b.jsx)(j.b,{color:"white",size:20}),Object(b.jsxs)("span",{className:"btn-inner--text",children:[" ",r]})]})]})}),L=(t(42),function(e){var n=e.resetImage,t=e.disabled,i=e.children;return Object(b.jsxs)(g.a,{className:"reset-action btn-icon btn-3",color:"primary",onClick:n,disabled:t,children:[Object(b.jsx)(j.a,{color:"white",size:20}),Object(b.jsxs)("span",{className:"btn-inner--text",children:[" ",i]})]})}),U=(t(43),function(e){var n=e.format,t=e.tags,i=e.imageUrl,r=e.children;return Object(b.jsxs)(g.a,{disabled:0===t.length,className:"btn-icon btn-3",color:"primary",onClick:function(){return"json"===n&&(null===k||void 0===k?void 0:k.saveToJsonFile({imageUrl:i,tags:t},"image-tagger-".concat(String((new Date).getTime()),".json")))},children:[Object(b.jsx)(j.f,{color:"white",size:20}),Object(b.jsxs)("span",{className:"btn-inner--text",children:[" ",r]})]})}),T=function(){var e=Object(i.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],o=Object(i.useState)(!1),c=Object(s.a)(o,2),u=c[0],j=c[1],f=Object(i.useState)(""),v=Object(s.a)(f,2),g=v[0],h=v[1],p=Object(i.useState)(!1),x=Object(s.a)(p,2),y=x[0],F=x[1],w=Object(i.useState)(!0),k=Object(s.a)(w,2),T=k[0],E=k[1],P=Object(i.useState)({X:0,Y:0}),R=Object(s.a)(P,2),J=R[0],A=R[1],X=function(e){!y&&h(e),F(!1),E(!1)},Y=function(){return g.trim().length>0},z=function(e,n){var i=t.find((function(n){return(null===n||void 0===n?void 0:n.id)===e}));if(i){var o=[].concat(Object(l.a)(t.filter((function(n){return n.id!==e}))),[Object(a.a)(Object(a.a)({},i),n)]);r(o)}},D=function(e){r(t.filter((function(n){return(null===n||void 0===n?void 0:n.id)!==e})))},B=Object(i.useState)(!1),H=Object(s.a)(B,2),K=H[0],W=H[1];return Object(b.jsxs)(b.Fragment,{children:[Y()&&J.X+J.Y>0&&!u&&!0!==K&&Object(b.jsx)(m,{coordinates:J,addTag:function(e){r((function(n){return[].concat(Object(l.a)(n),[e])})),j(!0)},onRemove:function(){return W(!0)}}),t.length>0&&t.map((function(e){return Object(b.jsx)(O,{tag:e,updateTag:z,removeTag:D},d.a.generate())})),Object(b.jsx)("div",{className:"box",children:Object(b.jsx)("div",{children:Y()?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(S,{onClickOverImage:function(e){var n=e.clientX,t=e.clientY;W(!1),A({X:n,Y:t}),j(!1)},onImageError:function(e){"error"===(null===e||void 0===e?void 0:e.type)&&F(!0)},imageUrl:g,isImageUrlNotFound:y})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C,{setFocus:T,onChangeUrl:X,onImageTypeNotSupported:function(){F(!0)}}),Object(b.jsx)("p",{children:"- OR -"}),Object(b.jsx)(N,{onFileLoaded:function(e){X(e)},children:"Pick a file on local disk drive"})]})})}),Object(b.jsxs)("div",{className:"actions",children:[Object(b.jsx)(L,{resetImage:function(){r([]),F(!1),h(""),E(!0)},disabled:!Y(),children:"Change image"}),Object(b.jsx)(U,{format:"json",tags:t,imageUrl:g,children:"Save to a JSON file"}),Object(b.jsx)(I,{onFileLoaded:function(e){var n=e.imageUrl,t=e.tags;X(n),r(t)},children:"Load from a JSON file"})]})]})};var E=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)("div",{className:"App-header",children:Object(b.jsx)(T,{})})})},P=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,48)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,o=n.getLCP,c=n.getTTFB;t(e),i(e),r(e),o(e),c(e)}))};c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(E,{})}),document.getElementById("root")),P()}},[[44,1,2]]]);
//# sourceMappingURL=main.b7325ac6.chunk.js.map